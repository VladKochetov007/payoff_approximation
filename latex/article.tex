\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{natbib}
\usepackage{hyperref}
\usepackage{setspace}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\onehalfspacing
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\usepackage{amsmath, amssymb, amsthm}

% Define keywords command
\providecommand{\keywords}[1]{\textbf{Keywords:} #1}

% Remove page number from the first page
\usepackage{titling}
\usepackage{geometry}

% Adjust vertical spacing on title page
\pretitle{\vspace*{2cm}\begin{center}}
\posttitle{\end{center}\vspace{0.5cm}}
\preauthor{\begin{center}}
\postauthor{\end{center}\vspace{0.5cm}}
\predate{\begin{center}}
\postdate{\end{center}\vspace{1cm}}

\title{\rule{\textwidth}{4pt}\\[1em]
\textbf{From Distribution Forecasts to Vanilla Portfolios: \\[0.2cm]
Regularized Payoff Approximation in Discrete Space}\\[1em]
\rule{\textwidth}{2pt}}

\author{\small \textbf{Vlad Kochetov} \\
    \small Faculty of Mechanics and Mathematics, \\
    \small Taras Shevchenko National University of Kyiv \\
    \small \texttt{vladkoch@knu.ua}
}
\date{\today}

\begin{document}

% Remove page number from the first page
\thispagestyle{empty}

\maketitle

\begin{abstract}
This paper explores the methodology for approximating complex payoff profiles using a
combination of vanilla European options. The mathematical framework is presented that
allows for the decomposition of arbitrary payoff structures into a series of call and
put options with varying strike prices. The approach is validated through numerical
examples and practical applications in financial engineering. The results demonstrate
the effectiveness of this method in replicating complex payoffs.
\end{abstract}

\newpage

\keywords{
    \small{
        Vanilla Options, 
        Payoff Profile, 
        Financial Engineering, 
        Option Pricing, 
        Approximation, 
        Numerical Methods,
        Quantitative Finance,
        Financial Derivatives,
        Computational Finance,
        Distribution Forecasts,
        Option Trading
    }
}

\section{Introduction}
The ability to replicate complex financial instruments using simpler, more liquid
derivatives is a cornerstone of modern financial engineering. Vanilla European 
options, due to their simplicity and widespread availability, serve as ideal 
building blocks for such approximations. This paper introduces an approach to 
approximating arbitrary payoff profiles using a combination of these options.

The traditional approach to financial modeling often relies heavily on assumptions about
the underlying price distribution, with the normal distribution being the most common choice
due to its mathematical tractability. However, empirical evidence consistently shows that
market price distributions exhibit significant deviations from normality \citep{Pokharel2024},
particularly in the form of heavy tails and higher moments that cannot be captured by simple
parametric models. This mismatch between theoretical assumptions and market reality can lead to
systematic pricing errors and risk underestimation.

The presented approach addresses these limitations by embracing the stochastic nature of markets
without imposing restrictive distributional assumptions. Instead of attempting to fit
market behavior into predetermined probability distributions as in \citep{Kuang2023} and 
\citep{Li2023}, this paper proposes a framework that can accommodate any empirically 
observed distribution. This distribution-free modeling approach acknowledges the complex, 
non-Gaussian nature of market price movements, which often exhibit fat tails and 
asymmetric behavior. It allows for direct incorporation of empirical distribution forecasts, 
enabling more accurate risk assessment and pricing.
Furthermore, the framework provides a flexible mechanism for extracting value from market
inefficiencies without relying on specific distributional assumptions, while being able
to adapt to changing market conditions and regime shifts that affect the shape of price
distributions.

The proposed methodology bridges the gap between theoretical option pricing models
and observed market behavior by providing a practical framework for implementing
distribution-based trading strategies. By focusing on distribution forecasting
rather than point predictions, traders can develop more robust strategies that
account for the full spectrum of possible market outcomes.

\section{Literature Review}
The theoretical foundations of option portfolio optimization were established in the work of 
\citep{Carr01012001}, which demonstrated the theoretical possibility of replicating 
arbitrary payoff functions through continuous strike spaces. While this approach 
provides elegant closed-form solutions in continuous market settings, several fundamental 
limitations affect practical implementation: the discrete availability of strike prices 
in real markets, liquidity constraints, non-negligible transaction costs scaling with 
portfolio complexity, and numerical stability challenges in finite difference implementations. 

The idea of modeling complete distributions rather than point estimates was inspired by recent 
advances in time series forecasting, particularly the work of \citep{ansari2024chronos}, which 
demonstrated the effectiveness of distribution-based predictions in capturing complex temporal 
patterns. While tail risk hedging has been a fundamental concept since \citep{BlackScholes1973}, 
where options were primarily used for downside protection, our approach extends this by 
considering the entire distribution shape in portfolio construction. Unlike traditional methods 
that focus solely on tail events, we propose a comprehensive framework that models and exploits 
the complete probability distribution of asset returns.

The proposed method addresses these limitations through regularization techniques and 
discrete optimization methods tailored for real-world trading environments, while 
preserving the theoretical elegance of the original framework.

\section{Methodology}
\subsection{Model Assumptions}
The proposed approximation framework relies on several key assumptions:

\begin{enumerate}
    \item \textbf{Discrete Strike Space:} The model operates in a discrete strike price space 
    $\{K_i\}_{i=1}^n$, reflecting real market conditions where options are available only 
    at specific strikes.
    
    \item \textbf{Local Approximation Region:} The approximation focuses on a finite price 
    interval around the current spot price $[S_{\min}, S_{\max}]$, where $S_{\min}$ and $S_{\max}$ 
    are chosen to ensure sufficient coverage of the relevant price region.
    
    \item \textbf{European-Style Options:} The framework utilizes European-style vanilla 
    options exclusively, avoiding the complexity of early exercise features present in 
    American options.
    
    \item \textbf{Static Replication:} The model assumes a static replication approach, 
    where the portfolio weights remain constant until maturity. Dynamic rebalancing effects 
    are not considered in the basic framework.
    
    \item \textbf{Put-Call Parity Flexibility:} The implementation supports both direct 
    use of calls and puts as separate instruments, as well as expressing puts through 
    calls and spot positions using put-call parity. This approach provides flexibility 
    in portfolio construction while maintaining mathematical equivalence.
    This flexibility enables optimization of the portfolio structure based on market 
    conditions.
\end{enumerate}

The numerical implementation discretizes the approximation domain into a finite set of 
evaluation points. The number of discretization points is chosen to balance computational 
efficiency with approximation accuracy.

\subsection{Mathematical Framework}
Let \( V(S) \) represent the value of a target payoff profile as a function of the 
underlying asset price \( S \). We construct an approximation using \( n \) call 
options and \( m \) put options with strike prices \( \{K_i\}_{i=1}^{n+m} \):

\begin{equation}
V(S) \approx \lambda S + 
    \sum_{i=1}^{n} \alpha_i C(S, K_i) + 
    \sum_{j=1}^{m} \beta_j P(S, K_j)
\end{equation}

where \( \lambda \) represents the spot position, \( \alpha_i \) and \( \beta_j \) 
are option weights. The optimal weights are found by solving the regularized least 
squares problem with L2 (Ridge) regularization:

\begin{equation}
\min_{\boldsymbol{\theta}} 
    \int_{S_{\min}}^{S_{\max}} 
        \left[ V(S) - \hat{V}(S;\boldsymbol{\theta}) \right]^2 dS + 
    \gamma \|\boldsymbol{\theta}\|_2^2
\end{equation}

where \( \boldsymbol{\theta} = (\lambda, \{\alpha_i\}, \{\beta_j\}) \) represents
the position weights, \( \gamma \) is the regularization parameter, and 
\( S_{\min}, S_{\max} \) define the approximation domain.

\begin{figure}[htbp]
\centering
\input{regularization_comparison.tex}
\caption{Comparison of L1 and L2 regularization}
\label{fig:regularization}
\end{figure}

The L2 norm promotes smoother weight distributions, providing stability to the solution.
Discretizing the integral and using matrix notation, we obtain:

\begin{equation}
\boldsymbol{\theta}^* = 
    \argmin_{\boldsymbol{\theta}} 
        \|\mathbf{A}\boldsymbol{\theta} - \mathbf{b}\|_2^2 + 
        \gamma \|\boldsymbol{\theta}\|_2^2
\end{equation}

where the design matrix \( \mathbf{A} \) contains option payoffs and spot positions
evaluated at discrete price points \( \{S_k\}_{k=1}^N \), and \( \mathbf{b} \) is
the vector of target payoff values.

This quadratic optimization problem admits an analytical solution:
\begin{equation}
\boldsymbol{\theta}^* = 
    (\mathbf{A}^\top \mathbf{A} + \gamma \mathbf{I})^{-1} 
    \mathbf{A}^\top \mathbf{b}
\end{equation}

\subsection{Alternative Loss Functions}
While the standard L2 loss function provides analytical tractability, alternative 
formulations may better reflect trading objectives. Two notable generalizations are:

\begin{enumerate}
    \item \textbf{L1 Regularization (Lasso):} Replacing L2 regularization term with L1 norm:
    \begin{equation}
        L(\boldsymbol{\theta}) = 
            \int_{S_{\min}}^{S_{\max}} 
                \left[ V(S) - \hat{V}(S;\boldsymbol{\theta}) \right]^2 dS + 
            \gamma \|\boldsymbol{\theta}\|_1
    \end{equation}
    This formulation tends to produce sparse solutions by setting some weights exactly 
    to zero, which can be beneficial when portfolio simplicity is important consideration.

    \item \textbf{Weighted Error Function:} Incorporating target function magnitude 
    into the error term:
    \begin{equation}
        L(\boldsymbol{\theta}) = 
            \int_{S_{\min}}^{S_{\max}} 
                V(S) \Big| V(S) - \hat{V}(S;\boldsymbol{\theta}) \Big| dS + 
            \gamma \|\boldsymbol{\theta}\|_p^p
    \end{equation}
\end{enumerate}

\begin{figure}[htbp]
\centering
\input{weighted_loss.tex}
\caption{Weighted Error Method Performance}
\label{fig:weighted}
\end{figure}

The weighted error formulation provides error weighting proportional to the target payoff magnitude, 
offering economic interpretation well-aligned with trading objectives. Furthermore, it 
naturally enhances focus on regions with significant payoff values, making it particularly 
suitable for practical applications.

\input{method_comparison.tex}

The empirical results presented in Table~\ref{tab:method_comparison} demonstrate clear 
superiority of the weighted error method across all regularization parameters. While the 
L2 regularization provides an analytical solution, making it computationally attractive, 
the weighted method consistently achieves MAE around 1.04, significantly outperforming 
both L1 and L2 approaches. The L2 method shows stable but inferior performance with MAE 
around 1.45, while L1 regularization's performance deteriorates significantly as $\gamma$ 
increases, with MAE growing from 1.45 to 4.62.

This comprehensive comparison suggests that for practical applications, the weighted error 
method should be preferred despite its requirement for numerical optimization. The improved 
accuracy (approximately 30\% reduction in MAE compared to L2) and consistent performance 
across different regularization parameters justify the additional computational cost.

\section{Results}
\subsection{Distribution-Based Trading}
The approximation method enables novel trading strategies that exploit distributional 
forecasts rather than direct price predictions. Traders can hedge against forecasted 
distribution features, express views on higher moments of price distribution, and 
implement volatility surface arbitrage strategies through carefully constructed 
option portfolios.

The key advantage emerges when combining the approximation with distribution 
forecasts $\mathbb{P}(S_T)$:
 
\begin{equation}
\mathbb{E}[V(S_T)] = 
    \int_{0}^{\infty} 
        V(S) \mathbb{P}(S_T = S) dS
\end{equation}

Optimal portfolio weights $\boldsymbol{\theta}^*$ maximize the expected payoff under 
forecasted distribution:

\begin{equation}
\boldsymbol{\theta}^* = 
    \argmax_{\boldsymbol{\theta}} 
        \mathbb{E}\left[\hat{V}(S_T;\boldsymbol{\theta})\right]
\end{equation}

\section{Conclusion}

\bibliographystyle{apalike}
\bibliography{references}

\end{document} 